{
  "version": 4,
  "terraform_version": "0.12.6",
  "serial": 28,
  "lineage": "80df9baf-14f3-3b7e-f307-049f8396cc27",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "consul_keys",
      "name": "app-secret-id",
      "each": "list",
      "provider": "provider.consul",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/mongo-db/secret_id",
                "value": "4c096e13-d650-a29b-cca6-3d498005e98b"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/booking-service/secret_id",
                "value": "9ae6f96c-1867-c8cf-a3d4-f4a5223269aa"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/payment-service/secret_id",
                "value": "ce3ee55b-1158-2837-c8c6-daae040848f8"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/notification-service/secret_id",
                "value": "8398d0ac-3f49-3f4d-26d7-6bf27cff07c2"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/movie-service/secret_id",
                "value": "f9d86711-d172-c08e-e2fa-7aeb006fa46b"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "consul_keys",
      "name": "apps-role-id",
      "each": "list",
      "provider": "provider.consul",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/mongo-db/role_id",
                "value": "c8836abf-f029-9254-5668-9e0979d56a72"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/booking-service/role_id",
                "value": "837b663c-5441-81f4-567a-9bcb18d17845"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/payment-service/role_id",
                "value": "5ec61a40-3496-d42b-1f06-354cfbbce9ef"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/notification-service/role_id",
                "value": "67af52b2-f406-7956-893a-43e1cf7eccae"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/movie-service/role_id",
                "value": "d8faa3ac-fb33-6c7a-67c5-f08c59f91813"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_approle_auth_backend_role",
      "name": "apps-role",
      "each": "list",
      "provider": "provider.vault",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/mongo-db-role",
            "period": 0,
            "policies": [],
            "role_id": "c8836abf-f029-9254-5668-9e0979d56a72",
            "role_name": "mongo-db-role",
            "secret_id_bound_cidrs": [],
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": [],
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "mongo-db-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_auth_backend.approle",
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/booking-service-role",
            "period": 0,
            "policies": [],
            "role_id": "837b663c-5441-81f4-567a-9bcb18d17845",
            "role_name": "booking-service-role",
            "secret_id_bound_cidrs": [],
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": [],
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "booking-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_auth_backend.approle",
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/payment-service-role",
            "period": 0,
            "policies": [],
            "role_id": "5ec61a40-3496-d42b-1f06-354cfbbce9ef",
            "role_name": "payment-service-role",
            "secret_id_bound_cidrs": [],
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": [],
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "payment-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_auth_backend.approle",
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/notification-service-role",
            "period": 0,
            "policies": [],
            "role_id": "67af52b2-f406-7956-893a-43e1cf7eccae",
            "role_name": "notification-service-role",
            "secret_id_bound_cidrs": [],
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": [],
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "notification-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_auth_backend.approle",
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/movie-service-role",
            "period": 0,
            "policies": [],
            "role_id": "d8faa3ac-fb33-6c7a-67c5-f08c59f91813",
            "role_name": "movie-service-role",
            "secret_id_bound_cidrs": [],
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": [],
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "movie-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_auth_backend.approle",
            "vault_policy.apps-policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_approle_auth_backend_role_secret_id",
      "name": "apps-secret",
      "each": "list",
      "provider": "provider.vault",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "accessor": "ade6cec4-eaf0-c95f-afe5-72d7e5775637",
            "backend": "approle",
            "cidr_list": [],
            "id": "backend=approle::role=mongo-db-role::accessor=ade6cec4-eaf0-c95f-afe5-72d7e5775637",
            "metadata": "{}",
            "role_name": "mongo-db-role",
            "secret_id": "4c096e13-d650-a29b-cca6-3d498005e98b",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role",
            "vault_auth_backend.approle"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "accessor": "a9aa8b60-fcdd-a6b8-8a6b-f6efbdb80aa0",
            "backend": "approle",
            "cidr_list": [],
            "id": "backend=approle::role=booking-service-role::accessor=a9aa8b60-fcdd-a6b8-8a6b-f6efbdb80aa0",
            "metadata": "{}",
            "role_name": "booking-service-role",
            "secret_id": "9ae6f96c-1867-c8cf-a3d4-f4a5223269aa",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role",
            "vault_auth_backend.approle"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "accessor": "99d0afaf-8cdf-14e5-035e-60b023525f78",
            "backend": "approle",
            "cidr_list": [],
            "id": "backend=approle::role=payment-service-role::accessor=99d0afaf-8cdf-14e5-035e-60b023525f78",
            "metadata": "{}",
            "role_name": "payment-service-role",
            "secret_id": "ce3ee55b-1158-2837-c8c6-daae040848f8",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role",
            "vault_auth_backend.approle"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "accessor": "af91f3d9-c6e2-006f-44ed-7b838cbc5ff5",
            "backend": "approle",
            "cidr_list": [],
            "id": "backend=approle::role=notification-service-role::accessor=af91f3d9-c6e2-006f-44ed-7b838cbc5ff5",
            "metadata": "{}",
            "role_name": "notification-service-role",
            "secret_id": "8398d0ac-3f49-3f4d-26d7-6bf27cff07c2",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role",
            "vault_auth_backend.approle"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "accessor": "96ba965c-4abe-0ffe-b6ec-c67e03bf745c",
            "backend": "approle",
            "cidr_list": [],
            "id": "backend=approle::role=movie-service-role::accessor=96ba965c-4abe-0ffe-b6ec-c67e03bf745c",
            "metadata": "{}",
            "role_name": "movie-service-role",
            "secret_id": "f9d86711-d172-c08e-e2fa-7aeb006fa46b",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role",
            "vault_auth_backend.approle"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_auth_backend",
      "name": "approle",
      "provider": "provider.vault",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "accessor": "auth_approle_39df5774",
            "default_lease_ttl_seconds": 0,
            "description": "",
            "id": "approle",
            "listing_visibility": "",
            "local": false,
            "max_lease_ttl_seconds": 0,
            "path": "approle",
            "type": "approle"
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_policy",
      "name": "apps-policy",
      "each": "list",
      "provider": "provider.vault",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "mongo-db-policy",
            "name": "mongo-db-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/mongo-db/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/mongo-db\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "booking-service-policy",
            "name": "booking-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/booking-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/booking-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "id": "payment-service-policy",
            "name": "payment-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/payment-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/payment-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "id": "notification-service-policy",
            "name": "notification-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/notification-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/notification-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "id": "movie-service-policy",
            "name": "movie-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/movie-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/movie-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        }
      ]
    }
  ]
}
