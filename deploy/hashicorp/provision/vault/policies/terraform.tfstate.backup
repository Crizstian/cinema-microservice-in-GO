{
  "version": 4,
  "terraform_version": "0.12.6",
  "serial": 27,
  "lineage": "79573d67-c18a-e5f8-514c-d38fca2ff41e",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "consul_keys",
      "name": "app-secret-id",
      "each": "list",
      "provider": "provider.consul",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/mongo-db/secret_id",
                "value": "b266563d-8b86-38d0-deae-f89041ef4dc4"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/booking-service/secret_id",
                "value": "be8dd04f-9015-df7c-3d1c-32ae86c26eea"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/payment-service/secret_id",
                "value": "3fc5bde4-d96a-d8ba-64ff-797c01ff640d"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/notification-service/secret_id",
                "value": "230bdc53-a994-96c8-5dea-e0797b514646"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/movie-service/secret_id",
                "value": "7e41b184-70fe-5527-2e50-b5b6bf13c161"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role_secret_id.apps-secret"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "consul_keys",
      "name": "apps-role-id",
      "each": "list",
      "provider": "provider.consul",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/mongo-db/role_id",
                "value": "mongo-db-role"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/booking-service/role_id",
                "value": "booking-service-role"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/payment-service/role_id",
                "value": "payment-service-role"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/notification-service/role_id",
                "value": "notification-service-role"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 1,
          "attributes": {
            "datacenter": "dc1",
            "id": "consul",
            "key": [
              {
                "default": "",
                "delete": false,
                "flags": 0,
                "name": "",
                "path": "cluster/vault/movie-service/role_id",
                "value": "movie-service-role"
              }
            ],
            "token": null,
            "var": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_approle_auth_backend_role",
      "name": "apps-role",
      "each": "list",
      "provider": "provider.vault",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/mongo-db-role",
            "period": 0,
            "policies": null,
            "role_id": "593243d6-a016-fe41-dbae-75b479a0e52a",
            "role_name": "mongo-db-role",
            "secret_id_bound_cidrs": null,
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "mongo-db-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/booking-service-role",
            "period": 0,
            "policies": null,
            "role_id": "2db869ee-b85b-6d77-37f1-a2ae03ba24fc",
            "role_name": "booking-service-role",
            "secret_id_bound_cidrs": null,
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "booking-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/payment-service-role",
            "period": 0,
            "policies": null,
            "role_id": "9bad3c5d-d2e0-ca63-3bb2-308030e73504",
            "role_name": "payment-service-role",
            "secret_id_bound_cidrs": null,
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "payment-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/notification-service-role",
            "period": 0,
            "policies": null,
            "role_id": "8a41047a-b042-4167-884c-c4f145bb385b",
            "role_name": "notification-service-role",
            "secret_id_bound_cidrs": null,
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "notification-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_policy.apps-policy"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "bound_cidr_list": null,
            "id": "auth/approle/role/movie-service-role",
            "period": 0,
            "policies": null,
            "role_id": "cd945640-2735-7a4a-9a54-e22817aa863f",
            "role_name": "movie-service-role",
            "secret_id_bound_cidrs": null,
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "movie-service-policy"
            ],
            "token_ttl": 1440,
            "token_type": "default"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_policy.apps-policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_approle_auth_backend_role_secret_id",
      "name": "apps-secret",
      "each": "list",
      "provider": "provider.vault",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "accessor": "76f6fe1e-ff2b-46a3-e355-ad8c9d146cc2",
            "backend": "approle",
            "cidr_list": null,
            "id": "backend=approle::role=mongo-db-role::accessor=76f6fe1e-ff2b-46a3-e355-ad8c9d146cc2",
            "metadata": "{}",
            "role_name": "mongo-db-role",
            "secret_id": "b266563d-8b86-38d0-deae-f89041ef4dc4",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "accessor": "a31fefbc-158d-5215-aefb-0e3a6219c109",
            "backend": "approle",
            "cidr_list": null,
            "id": "backend=approle::role=booking-service-role::accessor=a31fefbc-158d-5215-aefb-0e3a6219c109",
            "metadata": "{}",
            "role_name": "booking-service-role",
            "secret_id": "be8dd04f-9015-df7c-3d1c-32ae86c26eea",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "accessor": "8051c826-6a5b-f55e-e8ec-883d068828af",
            "backend": "approle",
            "cidr_list": null,
            "id": "backend=approle::role=payment-service-role::accessor=8051c826-6a5b-f55e-e8ec-883d068828af",
            "metadata": "{}",
            "role_name": "payment-service-role",
            "secret_id": "3fc5bde4-d96a-d8ba-64ff-797c01ff640d",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "accessor": "90cfb845-9de4-60e5-4d40-34dfd6016387",
            "backend": "approle",
            "cidr_list": null,
            "id": "backend=approle::role=notification-service-role::accessor=90cfb845-9de4-60e5-4d40-34dfd6016387",
            "metadata": "{}",
            "role_name": "notification-service-role",
            "secret_id": "230bdc53-a994-96c8-5dea-e0797b514646",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "accessor": "346943e9-7fce-c5a8-9b29-28cd4e53a68f",
            "backend": "approle",
            "cidr_list": null,
            "id": "backend=approle::role=movie-service-role::accessor=346943e9-7fce-c5a8-9b29-28cd4e53a68f",
            "metadata": "{}",
            "role_name": "movie-service-role",
            "secret_id": "7e41b184-70fe-5527-2e50-b5b6bf13c161",
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "vault_approle_auth_backend_role.apps-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_policy",
      "name": "apps-policy",
      "each": "list",
      "provider": "provider.vault",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "mongo-db-policy",
            "name": "mongo-db-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/mongo-db/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/mongo-db\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "booking-service-policy",
            "name": "booking-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/booking-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/booking-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "id": "payment-service-policy",
            "name": "payment-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/payment-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/payment-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "id": "notification-service-policy",
            "name": "notification-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/notification-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/notification-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "id": "movie-service-policy",
            "name": "movie-service-policy",
            "policy": "    path \"auth/token/lookup-self\" {\n      policy = \"read\" \n    }\n    path \"sys/*\" {\n      policy = \"deny\"\n    }\n    path \"secret/movie-service/*\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n    path \"secret/movie-service\" {\n      capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n    }\n"
          },
          "private": "bnVsbA=="
        }
      ]
    }
  ]
}
